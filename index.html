<!DOCTYPE html>
  <html>
  <head>
    <meta charset="utf-8">
    <title> watch the Æ’ out</title>
    <link href="styles.css" rel="stylesheet" type="text/css">
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1> Yo!! </h1>
        <h2> don't die! </h2>
        <div class="scoreboard">
          <!--  keep the score here!  -->
        </div>
      </header>
      <div class="gameArea"></div>
    </div>
    <script>
      var score = 0;
      var circleData = [];
      var circleRadius = 10;
      var boxSize = 500; //px
      var timeDelay = 2000; //ms
      var numOfEnemies = 10;
      var circleTemplate = {"x_val": boxSize/2,
                            "y_val": boxSize/2+50,
                            "radius": 10,
                            "color": 'black'};

      for(var i = 0; i < numOfEnemies; i++){
        circleData.push(circleTemplate);
      }

      var svgContainer = d3.select(".gameArea").append("svg")
                                               .attr("width", boxSize)
                                               .attr("height", boxSize)
                                               .attr("background-color", "#99A");

      var enemies = svgContainer.selectAll("circle")
                                .data(circleData)
                                .enter()
                                .append("circle");


      // var updateEnemyData = function(en){
      //   var randColor = "#"+ Math.floor(Math.random()*7) + Math.floor(Math.random()*7) + Math.floor(Math.random()*7);
      //   return en.each(function(d){
      //     d.y_val = genRand();
      //     d.x_val = genRand();
      //     d.color = randColor;
      //   });
      // };

      var genRandPosition = function(){
        return Math.floor(Math.random()*boxSize);
      };

      var refreshEnemy = function(en) {
        var randColor = "#"+ Math.floor(Math.random()*7) + Math.floor(Math.random()*7) + Math.floor(Math.random()*7);
        return en.transition()
                 .duration(timeDelay)
                 .attr("cy", function(d){d.y_val = genRandPosition(); return d.y_val;})
                 .attr("cx", function(d){d.x_val = genRandPosition(); return d.x_val;})
                 .attr("r", function(d){return d.radius;})
                 .style("fill", randColor);
      };

      var updateScore = function(player, en){
        console.log(d3.select("circle").attr("cy"));
      }

      var drag = d3.behavior.drag()
                            .on("drag", function(d, i){
                              d3.select(this).attr("cy", d3.event.y)
                                    .attr("cx", d3.event.x);
                            });

      var player = svgContainer.append("circle")
                               .attr("cy", boxSize/2)
                               .attr("cx", boxSize/2)
                               .attr("r", circleRadius)
                               .style("fill", "orange")
                               .call(drag);

      var setIntervalID2 = setInterval(updateScore, 150);
      var setIntervalID = setInterval(function(){refreshEnemy(enemies);},timeDelay);
    </script>
  </body>
</html>